{% extends "offcanvas.html" %}
{% load static sekizai_tags %}
{% load crispy_forms_tags %}

{% block content %}

<div class="row align-center">
  <div class="small-6 columns callout-form">
    
    <h2>Gute Idee!</h2>
    <p>Es gibt viele gute Menschen mit guten Ideen. Was ist Deine?</p>
  
    <form method="POST" id="form_id" enctype="multipart/form-data">{% csrf_token %}

      <div id="idea_form">
        <img id="blah" src="#" alt="your image" />

      {% for field in form %}
        <div class="fieldWrapper">
            {{ field.errors }}
            <div class="form-label">{{ field.label }}</div>
              {% if field.help_text %}
                <div class="second-form-label">{{ field.help_text|safe }}</div>
              {% endif %}
            {{ field }}
        </div>
      {% endfor %}

      <div class="row align-center">
        <input id="review_button" class="button" value="Vorschau deiner Idee" />
      </div>

      </div>

      <div id="review">
        <div class="grid-item">
          <div class="idea-card">
            <div class="idea-image">
              <img id="idea_img" src=""> 
            </div>
            <div class="idea-details">
              <h2 id="idea_title"></h2>
              <p id="idea_description"></p>
            </div>
            <div class="idea-heart">
              <span class="fa-stack fa-lg">
                <i class="fa fa-heart fa-stack-2x" aria-hidden="true"></i>
                <strong class="fa-stack-1x">0</strong>
              </span>
            </div>
          </div>
        </div>

        <div class="row align-center">
          <input class="button" type="submit" value="Speichern" />
        </div>
      </div>

    </form>

  </div>
</div>

{% addtoblock "js" %}
<script>

function readURL(input) {

    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $("#idea_img").attr("src", e.target.result);
          $("#blah").show();
          $("#blah").attr("src", e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}
$("#blah").hide();
$("#review").hide();
$("#id_email").parent().hide();

$("#id_picture").change(function(){
    readURL(this);
});

$("#review_button").click(function()
  {
    $("#idea_form").children().hide();
    $("#id_email").parent().show();
    $("#idea_title").html($("#id_title").val());
    $("#idea_description").html($("#id_description").val());
    readURL($("#id_picture"));
    $("#review").show();
    
  });

</script>
{% endaddtoblock %}

{% endblock content %}