{% load socialee_filters static %}

<div class="card">
  <div class="card-section">
    
    {# Bild #}
    {% if idea.picture %}
      <img src="{{ MEDIA_URL }}{{ idea.picture }}">
      <div class="row align-center">
        <div class="socialee-label small-3 column text-center">Idee</div>
      </div>
    {% else %}
      <div class="row align-center">
        <div class="socialee-label small-3 column text-center">Idee</div>
      </div>
    {% endif %}
    
    {# Titel #}
    <h4 class="text-center mt-05rem">{{ idea.title }}</h4>

    {# Beschreibung #}
    <p class="text-center small">{{ idea.description|truncatechars:600|urlizetrunc:25|url_target_blank|safe }}{% if idea.description|length > 599 %} |<a href="{% url 'idea_detail' idea.pk %}"> mehr</a>{% endif %}</p>

    {# Autor & Zeit #} 
    <p class="meta text-center mt-2rem mb-0">{% if idea.authorUser %}{{ idea.authorUser }} &#183; {% endif %}{{ idea.subm_date|timesince}}</p>
    <div class="separator-line"></div>

    {# Likes und Kommentare #} {# get like-counts up and running #}
    <div class="row align-center">
      <div class="small-4 column">
      
        {% if request.user.is_authenticated %}

            {% if idea in request.user.likes_ideas.all  %}
            <div class="button-wrapper" idea_id="{{ idea.id }}" id="heart_{{ idea.id }}">
              <div class="like-button orange">
                <i class="fa fa-heart orange" aria-hidden="true"> {{ idea.likes.count }}</i>
              </div>
            </div>
            {% else %}
            <div class="button-wrapper" idea_id="{{ idea.id }}" id="heart_{{ idea.id }}">
              <div class="like-button grey">
                <i class="fa fa-heart" aria-hidden="true"> {{ idea.likes.count }}</i>
              </div>
            </div>
            {% endif %}
          
        {% else %}

          <div class="button-wrapper">
            <div class="like-button">
              <a href="{% url 'account_login' %}"><i class="fa fa-heart" aria-hidden="true"> {{ idea.likes.count }}</i></a>
            </div>
          </div>

        {% endif %}

      </div>

      <div class="small-4 column">
        <div class="button-wrapper">
          <div class="button-pill">
            <i class="fa fa-comment" aria-hidden="true"> {{ idea.comments.count }}</i>
          </div>
        </div>
      </div>

    </div>    

  </div>
</div>

